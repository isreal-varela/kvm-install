# Generated by pykickstart v3.32
#version=ROCKY9
# Use text install
text --non-interactive

# Once install is finished, shut down
shutdown

eula --agreed

%addon com_redhat_kdump --disable

%end

# Keyboard layouts
keyboard --xlayouts='us'
# System language
lang en_US.UTF-8

# Network information
network  --bootproto=dhcp --device=enp1s0 --noipv6 --activate
network  --hostname=localhost.localdomain

%packages
@^minimal-environment
cloud-init
vim 
tmux
qemu-guest-agent
lsof
bash-completion
clevis.x86_64 
clevis-dracut.x86_64
clevis-luks.x86_64 
clevis-pin-tpm2.x86_64
clevis-systemd.x86_64
clevis-udisks2.x86_64 
ipa-client
-iw*-firmware

%end

# Disable the Setup Agent on first boot
firstboot --disable


ignoredisk --only-use=vda
# System bootloader configuration
bootloader --location=mbr --boot-drive=vda --append="fips=1"

# Partition clearing information
clearpart --all --initlabel

# Disk partitioning information
part pv.1799 --fstype="lvmpv" --ondisk=vda --size=39935 
part /boot --fstype="xfs" --ondisk=vda --size=1024
volgroup rl --pesize=4096 pv.1799
logvol /var --fstype="xfs" --size=10240 --name=var --vgname=rl
logvol /home --fstype="xfs" --size=10240 --name=home --vgname=rl
logvol /tmp --fstype="xfs" --size=1024 --name=tmp --vgname=rl
logvol swap --fstype="swap" --size=2044 --name=swap --vgname=rl
logvol /var/log/audit --fstype="xfs" --size=2048 --name=var_log_audit --vgname=rl
logvol / --fstype="xfs" --size=10240 --name=root --vgname=rl
logvol /var/log --fstype="xfs" --size=4096 --name=var_log --vgname=rl

# System timezone
timezone America/New_York --utc

# Root password
rootpw --iscrypted $6$y0ToQj4FDojgwNAj$ph7LNdS5jpKo5O6pe24c634SYSQbX4O47SHDNSieX85TIhP1Z2GzaxxIKtXSDh7pHDeepl2dR42BlAfRAMGzc/
user --groups=wheel --name=ansible --password=$6$dT1KVjTmeTfVPn/d$Fxz5eethzmtpwtdVDiL3h87k0GpaYYG4qLdZb3P6ucytS3xOT1zohkVlO/G9rcKIvD7krypS9AIDyy4LLAFV00 --iscrypted --gecos="ansible"
sshkey --username=ansible "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCXtiymbnftzKRgXXuIOSBdrCLVfxyTzhjhsk92uBRIvjhKHqyfHA3m9HKyFagU9Lym0JhMDRaVonIKV6DaXffC6Z51XgSOv1jAVypxDV5+FOb0jtuMMR3DMWkVx24NNgT0pSAS4INPgKmrWIkk9sisN8EeY0VeHqc+kEQybwz3hwEzuKlTgGD433lUQt8OZFQIiR0nMxiQwEDrXm8QCykfBwWQUno8MgWCMnZ4Kt8z4ZokVkJKovaTGLZSOX86h7ZTpQyracgk+9qmh9bpvty2UTwakYupjB/9vAZ1oD/4rBWetr80dllECJRU+SEHfywsl8wF8zF/B4+iCSRZKPjd root@mgnt"
